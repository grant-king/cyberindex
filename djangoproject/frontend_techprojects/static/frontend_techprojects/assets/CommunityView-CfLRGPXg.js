import{y as M,e as h,o as l,c,a as e,x as R,F as T,n as A,h as r,k as I,l as N,t as b,b as p,p as P,f as W,g as H,m as O,w as E,r as B,_ as G}from"./index-BVOfKgx-.js";const V={class:""},X={class:"flex mx-auto align-center justify-center bg-white/50 overflow-hidden"},q={class:"border-4 border-dotted"},U={__name:"PixelDanceArt",setup(i){const t=M(),o=h(400),s=h(400);async function n(){o.value=Math.min(window.innerHeight,window.innerWidth),s.value=Math.min(window.innerHeight,window.innerWidth),await t.load_communal_dances_page(),t.animate_all_dances()}return(d,g)=>(l(),c("div",V,[e("div",X,[e("div",q,[e("div",{class:"relative bg-black",style:R({width:`${o.value}px`,height:`${s.value}px`}),onClick:n},[(l(!0),c(T,null,A(r(t).pixeldance_list,u=>(l(),c("div",{key:u.id,class:"absolute w-4 h-4 opacity-80 rounded-full",style:R({left:`${u.x*(o.value/400)}px`,top:`${u.y*(o.value/400)}px`,backgroundColor:u.color})},null,4))),128))],4)])])]))}},z=I("meditations",()=>{const t=`${window.location.origin}/apiv1/meditation/`,o={message:'They said, "Dance like this so we can find you, spin and twist until you fly". And so he started to dance and twist, just like this. He started to dance and spin. They found him well; together, they danced a spell. In a moment while spinning, he began to fly.',rep_name:"Grant King",rep_role:"Spinning",rep_image_url:"https://unrolla.blob.core.windows.net/unrolla/images/PXL_20231023_004949758_4679usk.webp",company_name:"Alignment",company_logo_url:"https://unrolla.blob.core.windows.net/unrolla/images/IT20_pumpkin_logo_D9SHwmg.webp",company_website:"https://2it0.com/"},s=h([]);s.value.push(o);const n=h(0),d=N(()=>s.value[n.value]);async function g(){await a(),console.log(s.value),n.value=s.value.length-1,console.log(n.value)}function u(){n.value>0&&(n.value-=1)}async function a(){console.log("fetching random meditation");const _=await fetch(t,{method:"GET",headers:{"X-CSRFToken":window.csrf_token}});if(_.ok){const f=await _.json();s.value.push(f)}else console.error("failed to fetch meditation"),console.error(_)}return{fetchMeditation:a,readMeditation:g,rewindMeditation:u,meditation_list:s,current_preview:d,current_preview_index:n}}),Q={class:"my-10"},K={class:"text-xl bg-clip-text bg-[url(https://unrolla.blob.core.windows.net/unrolla/images/P8220521.webp)]"},Y={class:"text-transparent bg-clip-text bg-black/80 font-bold"},Z={class:"mt-10 flex gap-x-6"},J=["src"],ee={class:"text-center"},te={class:"bg-clip-text bg-black"},oe={class:"text-xl font-bold font-mono text-transparent bg-clip-text bg-gradient-to-b from-lime-900 via-lime-900/80 to-violet-600/80"},se={class:"text-sm/6 font-semibold font-mono text-black"},ne={class:"flex justify-center pt-2"},ae=["src"],ie={__name:"SponsorWidget2",props:{message:String,author:String,sponsor_role:String,org_name:String,sponsor_avatar:String,company_logo_url:String},setup(i){return(t,o)=>(l(),c("figure",Q,[e("blockquote",K,[e("div",Y,[e("p",null,"“"+b(i.message)+"”",1)])]),e("figcaption",Z,[e("img",{src:i.sponsor_avatar,alt:"",class:"size-36 flex-none rounded-full border-8 border-transparent bg-clip-border bg-cover bg-[url(https://unrolla.blob.core.windows.net/unrolla/images/P9110024.webp)]"},null,8,J),e("div",ee,[e("div",te,[e("div",oe,b(i.author),1)]),e("div",se,b(i.sponsor_role)+" for "+b(i.org_name),1),e("div",ne,[e("img",{src:i.company_logo_url,alt:"",class:"size-20"},null,8,ae)])])])]))}},re={class:"bg-white/50 mx-auto"},le={class:"flex items-center justify-center"},ce={__name:"SponsorCarousel",setup(i){const t=z();return console.log(t.current_preview),(o,s)=>(l(),c("div",re,[e("div",le,[e("div",{class:"max-w-xl bg-white/5 px-8 rounded-md",onClick:s[0]||(s[0]=(...n)=>r(t).readMeditation&&r(t).readMeditation(...n))},[p(ie,{message:r(t).current_preview.message,author:r(t).current_preview.rep_name,sponsor_role:r(t).current_preview.rep_role,org_name:r(t).current_preview.company_name,sponsor_avatar:r(t).current_preview.rep_image_url,company_logo_url:r(t).current_preview.company_logo_url},null,8,["message","author","sponsor_role","org_name","sponsor_avatar","company_logo_url"])])])]))}},D=I("avatarstats",()=>{const t=`${window.location.origin}/apiv1/avatars/`,o=`${t}session_stats/`,s=`${t}linked_stats/`,n=h({}),d=h({});async function g(){const a=await fetch(o,{method:"GET",headers:{"X-CSRFToken":window.csrf_token}}),_=await a.json();a.ok?n.value=_:(console.error("failed to fetch session stats"),console.error(a))}async function u(){const a=await fetch(s,{method:"GET",headers:{"X-CSRFToken":window.csrf_token}}),_=await a.json();a.ok?d.value=_:(console.error("failed to fetch linked stats"),console.error(a))}return{session_stats:n,linked_stats:d,fetchSessionStats:g,fetchLinkedStats:u}}),de={class:"bg-white/10 rounded-lg py-8"},ue={class:"mx-auto max-w-7xl px-8"},_e={class:"font-mono"},me={class:"text-balance text-2xl font-semibold tracking-tight text-black"},he={class:"mt-4 grid grid-cols-1 gap-0.5 overflow-hidden rounded-2xl text-center sm:grid-cols-2 lg:grid-cols-4"},ge={class:"text-sm/6 font-semibold text-black/80"},ve={class:"order-first text-3xl font-semibold tracking-tight text-black"},pe="::::::::::: :::::",be={__name:"SessionStats",props:{stgrp_idx:Number,title:String},setup(i){const t=D();return t.fetchSessionStats(),(o,s)=>(l(),c("div",de,[e("div",ue,[e("div",{class:"mx-auto max-w-2xl lg:max-w-none",onClick:s[0]||(s[0]=(...n)=>r(t).fetchSessionStats&&r(t).fetchSessionStats(...n))},[e("div",_e,[e("h2",me,b(i.title),1),e("p",{class:"mt-4 text-lg/8 text-black/80"},b(pe))]),e("dl",he,[(l(!0),c(T,null,A(r(t).session_stats,(n,d)=>(l(),c("div",{key:n,class:"flex flex-col bg-white/5 p-8"},[e("dt",ge,b(d),1),e("dd",ve,b(n),1)]))),128))])])])]))}},L=I("avatarcreate",()=>{const t=`${window.location.origin}/apiv1/avatars/`,o=h(null),s=h(null),n=h({}),d=`${t}all_images/`,g=h([]);async function u(){const m=await fetch(d,{method:"GET",headers:{"X-CSRFToken":window.csrf_token}}),v=await m.json();m.ok?(console.log("all images",v),g.value=v.public_images):(console.error("failed to fetch all images"),console.error(m))}async function a(){await _(),await f();const m=new FormData;m.append("original_hash",s.value),console.log("converted file",n.value),m.append("public_image",n.value);const v=await fetch(t,{method:"POST",headers:{"X-CSRFToken":window.csrf_token},body:m}),w=await v.json();v.ok?(console.log("created avatar",w),g.value.unshift(w.public_image)):(console.error("failed to create avatar"),console.error(v))}async function _(){const m=o.value;if(m===null){console.error("no file selected");return}const v=await m.arrayBuffer(),w=await crypto.subtle.digest("SHA-256",v),S=Array.from(new Uint8Array(w)).map(j=>j.toString(16).padStart(2,"0")).join("");s.value=S}async function f(){const m=o.value;if(!m){console.error("No file selected");return}return console.log("Converting image to webp"),new Promise((v,w)=>{const x=new Image;x.src=URL.createObjectURL(m),x.onload=()=>{let y=x.width,k=x.height;if(y>800||k>600){const $=Math.min(800/y,600/k);y=y*$,k=k*$}const C=document.createElement("canvas");C.width=y,C.height=k,C.getContext("2d").drawImage(x,0,0,y,k),C.toBlob($=>{if($){const F=new File([$],"image.webp",{type:"image/webp"});n.value=F,v(F)}else w("Failed to convert image")},"image/webp")},x.onerror=S=>{console.error("Failed to load image"),console.error(S),w(S)}})}return{createAvatar:a,convertImageToWebP:f,fetchAllImages:u,all_images:g,original_image_file:o,image_upload_preview:n}}),fe={class:"flex flex-wrap"},we={class:"h-16 w-16 border-white border-2 border-dotted rounded-md"},xe=["src"],ye={__name:"SessionImageQuilt",setup(i){D();const t=L();return t.fetchAllImages(),(o,s)=>(l(),c("div",{class:"",onClick:s[0]||(s[0]=(...n)=>r(t).fetchAllImages&&r(t).fetchAllImages(...n))},[s[1]||(s[1]=e("div",{class:"text-2xl my-8"}," Session Image Quilt ",-1)),e("div",fe,[(l(!0),c(T,null,A(r(t).all_images,(n,d)=>(l(),c("div",{key:d,class:""},[e("div",we,[e("img",{class:"aspect-square object-cover blur-sm hover:blur-0 border-white border-2 border-dotted rounded-md",src:n},null,8,xe)])]))),128))])]))}},ke={class:""},Se={class:""},$e={class:"my-8"},Ce={class:"my-4"},Te=["v-model"],Ae={key:0},Ie={class:"max-w-64"},je={class:""},Fe={class:"flex justify-center"},Re=["src"],De={class:"my-4"},Le={class:""},Me={class:"my-8"},Ne={__name:"SessionImageAdd",setup(i){const t=L(),o=h(!1),s=h(null),n=h(null);async function d(u){const a=u.target.files[0];s.value=a.name;const _=new FileReader;_.onload=f=>{console.log(f.target.result),n.value=f.target.result},_.readAsDataURL(a),t.original_image_file=a}async function g(){t.createAvatar(),alert("Image submitted. Check out the quilt above!"),s.value=null,n.value=null}return(u,a)=>(l(),c("div",ke,[e("div",Se,[e("div",$e,[a[1]||(a[1]=e("div",{class:""}," connect this session to other sessions... ",-1)),a[2]||(a[2]=e("div",{class:"text-4xl"}," submit a session image ",-1)),e("div",null,[e("button",{class:"border-dotted text-xs border-b-2 border-r-4 rounded-sm bg-clip-border text-black font-bold px-3 py-2",onClick:a[0]||(a[0]=_=>o.value=!o.value)}," About Session Image ")])]),e("div",Ce,[e("input",{"v-model":s.value,type:"file",accept:"image/png",onChange:d},null,40,Te)]),s.value?(l(),c("div",Ae,[e("div",Ie,[e("div",je,[e("div",Fe,[e("img",{class:"aspect-square object-cover border-white border-2 border-dotted rounded-md",src:n.value},null,8,Re)])])]),e("div",De,[e("div",Le,[e("button",{class:"border-dotted border-4 rounded-md bg-clip-border text-black font-bold px-3 py-2",onClick:g}," Submit "+b(s.value),1)])])])):P("",!0)]),W(e("div",Me,a[3]||(a[3]=[e("div",null," Submitting an original image allows you to securely track your progress across sessions. ",-1),e("div",null," Think of this like login credentials, except you only have to resubmit them when your session expires. ",-1),e("div",null," If you want the same data on different devices, all you have to do is submit the same image on each device to link the sessions. ",-1),e("div",null," The data in the orignal image will be hashed, then converted to webp. The hash and the converted image will be stored in our database. The original image is not stored in our database. ",-1),e("div",null," You must submit the original PNG image in order to associate this session with other sessions that also submitted the original image. ",-1),e("div",null," The hash is used to link sessions for aggregated stats and to provide a greater level of persistence for users who don't want to lose platform progress. ",-1),e("div",null," The converted image will be used in things like our community session quilt, check it out above! ",-1)]),512),[[H,o.value]])]))}},Pe={class:"bg-white/50"},We={class:"min-h-32 border-black border-dashed border-y-8"},He={class:"mx-auto max-w-7xl p-8"},Oe={class:"mt-16"},Ee={class:"mt-16"},Be={class:"mt-16"},Ge={__name:"SessionConsole",setup(i){return(t,o)=>(l(),c("div",Pe,[e("div",We,[e("div",He,[o[0]||(o[0]=e("div",{class:"text-3xl font-mono font-extrabold"}," SESSION CONSOLE ",-1)),e("div",Oe,[p(ye)]),e("div",Ee,[p(Ne)]),e("div",Be,[p(be,{stgrp_idx:"0",title:"Session Stats"})])])])]))}},Ve={class:""},Xe={class:""},qe={class:""},Ue={class:"bg-white/50 p-4"},Ke={__name:"CommunityView",setup(i){return(t,o)=>{const s=B("RouterLink");return l(),c("div",Ve,[e("div",null,[p(G,{eyebrow:"you are so very welcome",title:"Community Center",description:"Or 'Chill Zone'? 'Meditation Lagoon'? Feel free to give it a private nickname. Whatever you want to call this place, please have a good time."})]),e("div",null,[p(U)]),o[1]||(o[1]=e("div",{class:"min-h-16 bg-white/50"},null,-1)),e("div",Xe,[p(ce)]),o[2]||(o[2]=e("div",{class:"min-h-32 bg-white/50"},null,-1)),e("div",qe,[p(Ge)]),o[3]||(o[3]=O('<div class="min-h-32 bg-white/50"></div><div class="bg-white/50 p-4"><div class="text-black"><a href="/buildforge" class="text-2xl font-bold border-dotted border-4 border-white/50 px-3 py-2 rounded-sm hover:border-white/80"> Our Disco Tech </a> ** now featuring multiplayer bugs! ** </div><div class="py-8 text-xs"> I mean multiplayer is very broken, but check it out if you must see the developing state of the project NOW. If anyone knows how to run web workers in a Vue =&gt; static bucket Django storages setup without offending CORS, I&#39;d love to learn from you. </div></div>',2)),e("div",Ue,[p(s,{to:"/webgpu"},{default:E(()=>o[0]||(o[0]=[e("button",{class:"text-black text-2xl font-bold border-dotted border-4 border-white/50 px-3 py-2 rounded-sm hover:border-white/80"}," Web GPU Demo ",-1)])),_:1})]),o[4]||(o[4]=e("div",{class:"min-h-32 bg-white/50"},null,-1))])}}};export{Ke as default};
